<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Digital Banking Mock</title>
</head>
<body>
  <h1>Digital Banking Mock</h1>
  <section>
    <h3>Login</h3>
    <input id="email" placeholder="email" value="demo@bank.com"/>
    <input id="password" type="password" placeholder="password" value="demo123"/>
    <button onclick="login()">Login</button>
    <pre id="loginOut"></pre>
  </section>
  <section>
    <h3>Transfer</h3>
    <input id="from" placeholder="from account" value="1001"/>
    <input id="to" placeholder="to account" value="2002"/>
    <input id="amount" placeholder="amount" value="50"/>
    <button onclick="transfer()">Send</button>
    <pre id="transferOut"></pre>
  </section>
  <section>
    <h3>Ledger</h3>
    <button onclick="listTransfers()">Refresh</button>
    <pre id="listOut"></pre>
  </section>
<script>
let token = "";
async function login(){
  const res = await fetch('/api/login', {method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({email: document.getElementById('email').value, password: document.getElementById('password').value})
  });
  const data = await res.json(); token = data.token; document.getElementById('loginOut').innerText = JSON.stringify(data,null,2);
}
async function transfer(){
  const res = await fetch('/api/transfer', {method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({from: from.value, to: to.value, amount: Number(amount.value)})});
  document.getElementById('transferOut').innerText = JSON.stringify(await res.json(), null, 2);
}
async function listTransfers(){
  const res = await fetch('/api/transfers'); document.getElementById('listOut').innerText = JSON.stringify(await res.json(), null, 2);
}
</script>
</body>
</html>
